<!DOCTYPE html>
<html lang="it">
<head>
<title>Virtual Tour</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<style> @-ms-viewport { width: device-width; } </style>
<link rel="stylesheet" href="vendor/reset.min.css">
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>


<!-- Tasto lingua in alto a sinistra -->
<body>
<a href="javascript:void(0)" id="languageToggle" class="glass-btn lang-btn-simple" aria-label="Cambia Lingua">
  <span id="lang-flag" class="lang-flag">ðŸ‡®ðŸ‡¹</span>
  <span id="lang-label" class="lang-label">IT</span>
</a>
<script>
// Semplice toggle lingua con bandiera
const languageToggle = document.getElementById('languageToggle');
const langLabel = document.getElementById('lang-label');
const langFlag = document.getElementById('lang-flag');
let currentLang = 'it';
languageToggle.addEventListener('click', function() {
  if(currentLang === 'it') {
    currentLang = 'en';
    langLabel.textContent = 'EN';
    langFlag.textContent = 'ðŸ‡¬ðŸ‡§';
    document.body.classList.add('lang-en');
    document.body.classList.remove('lang-it');
  } else {
    currentLang = 'it';
    langLabel.textContent = 'IT';
    langFlag.textContent = 'ðŸ‡®ðŸ‡¹';
    document.body.classList.add('lang-it');
    document.body.classList.remove('lang-en');
  }
});
</script>
<body>

<div id="pano"></div>



<div id="rightBar">
  <a href="javascript:void(0)" id="mapToggle" class="glass-btn" title="Mappa">
    <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" fill="rgba(52,152,219,0.18)" stroke="#fff"/>
      <circle cx="12" cy="9" r="2.5" fill="#fff"/>
    </svg>
  </a>
  <a href="javascript:void(0)" id="autorotateToggle" class="glass-btn" title="Autorotazione">
    <svg class="icon-play" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
    <svg class="icon-pause" viewBox="0 0 24 24" fill="currentColor" style="display:none"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
  </a>
  <a href="javascript:void(0)" id="fullscreenToggle" class="glass-btn" title="Schermo Intero">
    <svg class="icon-fs-on" viewBox="0 0 24 24" fill="currentColor"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
    <svg class="icon-fs-off" viewBox="0 0 24 24" fill="currentColor" style="display:none"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/></svg>
  </a>
</div>

<div id="bottomBar" class="glass-panel">
  
  <div id="bottomBarToggle" class="toggle-btn" title="Mostra/Nascondi">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </div>

  <div id="barControls">
    <div class="sceneName"></div>
    <div class="control-group">
      <div class="nav-btn" id="viewLeft" title="Sinistra">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
      </div>
      <div class="nav-btn" id="viewUp" title="Su">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 15l-6-6-6 6"/></svg>
      </div>
      <div class="nav-btn" id="viewDown" title="GiÃ¹">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
      </div>
      <div class="nav-btn" id="viewRight" title="Destra">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
      </div>
    </div>

    <div class="divider"></div>

    <div class="control-group">
      <div class="nav-btn" id="viewOut" title="Zoom Out">
        <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round"><circle cx="12" cy="12" r="9" stroke-opacity="0.7"/><line x1="8" y1="12" x2="16" y2="12"/></svg>
      </div>
      <div class="nav-btn" id="viewIn" title="Zoom In">
        <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round"><circle cx="12" cy="12" r="9" stroke-opacity="0.7"/><line x1="8" y1="12" x2="16" y2="12"/><line x1="12" y1="8" x2="12" y2="16"/></svg>
      </div>
    </div>
  </div>

  <div class="thumb-scroll prev" id="thumbPrev" title="Panorama precedente">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
  </div>

  <div class="thumb-scroll next" id="thumbNext" title="Panorama successivo">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
  </div>

  <div id="thumbsContainer">
    <ul id="thumbs" class="thumbs">
      </ul>
  </div>
</div>

<div id="map-modal" class="custom-modal" style="display:none;">
  <div class="modal-content map-content">
    <div class="modal-header">
      <span id="map-layer-name">Mappa</span>
      <span id="map-coords" style="margin-left:12px;color:#fff;font-size:13px;text-align:left;display:inline-block;min-width:120px;"></span>
      <button class="modal-close" onclick="closeMapModal()">&times;</button>
    </div>
    <div class="modal-body-map">
      <div id="map-container"></div>
      <!-- Floating map controls: solo cambio layer e mostra tutti -->
      <div id="map-controls-floating" class="map-controls-floating">
        <div class="map-controls-stack">
          <button id="map-controls-cycle" class="map-controls-cycle" title="Cambia layer">
            <span class="map-btn-icon">
              <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="12 2 22 7 12 12 2 7 12 2" fill="rgba(52,152,219,0.18)"/>
                <polygon points="12 12 22 17 12 22 2 17 12 12" fill="rgba(52,152,219,0.32)"/>
                <line x1="2" y1="7" x2="12" y2="12" />
                <line x1="12" y1="12" x2="22" y2="7" />
                <line x1="2" y1="17" x2="12" y2="22" />
                <line x1="12" y1="22" x2="22" y2="17" />
              </svg>
            </span>
          </button>
          <button id="map-controls-fit" class="map-controls-fit" title="Mostra tutti">
            <span class="map-btn-icon">
              <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="4" y="4" width="16" height="16" rx="4" fill="rgba(52,152,219,0.18)"/>
                <polyline points="4,10 4,4 10,4" />
                <polyline points="14,4 20,4 20,10" />
                <polyline points="20,14 20,20 14,20" />
                <polyline points="10,20 4,20 4,14" />
              </svg>
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="custom-hotspot-modal" class="custom-modal">
  <div class="modal-content info-content">
    <div class="modal-header">
      <h3 id="modal-title"></h3>
      <button class="modal-close" onclick="closeCustomModal()">&times;</button>
    </div>
    <div class="modal-body" id="modal-body"></div>
  </div>
</div>

<script src="vendor/screenfull.min.js" ></script>
<script src="vendor/bowser.min.js" ></script>
<script src="vendor/marzipano.js" ></script>

<!-- EXIF helper (used to read GPS from JPEGs if present) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/exif-js/2.3.0/exif.min.js"></script>

<script src="translations.js"></script>
<script src="data.js"></script>
<script src="index.js"></script>

</body>
</html>